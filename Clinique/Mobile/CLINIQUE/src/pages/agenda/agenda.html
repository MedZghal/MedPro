<!--
  Generated template for the TesKalenderPage page.
  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header >
  <ion-navbar hideBackButton  class="nav-transparent" color="primary">
    <ion-title>
      <ion-avatar item-left style="width: 25px;margin-bottom: -23px;margin-left: -11px;">
        <img  src="./assets/img/event.png">
      </ion-avatar>
      <span style=" margin-left: 18px; "> Liste des Rendez-Vous </span>
    </ion-title>
    <ion-segment style=" width: 100%;">

      <ion-segment-button value="Semaine"  (click)="RefreshWeek()" >
        <img style="    margin-top: -5px;width: 28px; " src="./assets/img/organizer_calendar_clock.png"><span> Semaine </span>
      </ion-segment-button>

      <ion-segment-button value="Aujourdhui"  (click)="calendar.today()" >
        <img style="    margin-top: -5px;width: 28px; " src="./assets/img/calendar_office_day.png"><span> Aujourd'hui </span>
      </ion-segment-button>

    </ion-segment>
  </ion-navbar>

  <ion-buttons end style=" margin-top: -65px; ">
    <button class="Dismiss" ion-button (click)="dismiss()">
      <span color="primary" showWhen="ios">Cancel</span>
      <ion-icon name="md-close" showWhen="android,windows"></ion-icon>
    </button>
  </ion-buttons>
</ion-header>

<ion-content>
  <div class="clear" style="margin-top: 20px; "></div>

  <ion-calendar #calendar [events]="currentEvents" lang="fr" (onDaySelect)="onDaySelect($event)" (onMonthSelect)="onMonthSelect($event)"></ion-calendar>

  <div  class="mbsc-comp">
    <div lang="fr" class="mbsc-fr  mbsc-mobiscroll mbsc-fr-inline  mbsc-ev-cal mbsc-calendar mbsc-dt mbsc-sc mbsc-fr-liq mbsc-fr-nobtn">
      <div class="mbsc-fr-popup mbsc-ltr">
        <div class="mbsc-fr-w">
          <div aria-live="assertive" class="mbsc-fr-aria mbsc-fr-hdn"></div>
          <div class="mbsc-fr-c">
            <div class="mbsc-w-p mbsc-cal-c">
              <div class="mbsc-cal  mbsc-cal-week-view mbsc-cal-has-marks">
                <div class="mbsc-cal-hdr">
                  <div class="mbsc-cal-btn-w">
                    <div data-step="-1" role="button" tabindex="0" aria-label="Previous Month" class="mbsc-ic mbsc-ic-arrow-left5 mbsc-cal-prev mbsc-cal-prev-m mbsc-cal-btn mbsc-fr-btn mbsc-fr-btn-e" data-touch="1" (click)="GetWeekEvent('-')"></div>
                    <button role="button" (click)="Refresh()" class="mbsc-cal-month">{{weekStart}} - {{weekEnd}}</button>
                    <div data-step="1" role="button" tabindex="0" aria-label="Next Month" class="mbsc-ic mbsc-ic-arrow-right5 mbsc-cal-next mbsc-cal-next-m mbsc-cal-btn mbsc-fr-btn mbsc-fr-btn-e" data-touch="1" (click)="GetWeekEvent('+')"></div>
                  </div>
                </div>
              </div>
              <div class="mbsc-cal-events mbsc-anim-pop ">
                <div class="mbsc-cal-events-arr"></div>
                <div class="mbsc-cal-events-i mbsc-comp">
                  <div class="mbsc-cal-events-sc" style="transform: translate3d(0px, 0px, 0px);"></div>
                  <div class="mbsc-sc-bar-c" style="height: 0px;">
                    <div class="mbsc-sc-bar" style="height: 0px;"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="mbsc-lv-cont mbsc-lv-mobiscroll mbsc-event-list">
            <ul class="mbsc-lv mbsc-lv-v">
              <div *ngIf=" rdvs.length > 0; else other_content" >
                <div *ngFor=" let r of rdvs ">
                  <li class="mbsc-lv-gr-title mbsc-event-day">{{r.startDate}}</li>
                  <li *ngFor=" let v of r.items ;let i = index" class="mbsc-lv-item">
                    <div class="mbsc-event-time"> {{ v.startDate| date:'HH:mm'}} - {{ v.endDate| date:'HH:mm'}}  </div>
                    <div class="mbsc-event-color" style="background:#ff9966;"></div>
                    <div class="mbsc-event-txt">{{v.descpRDV}}</div>
                  </li>
                </div>
              </div>
              <ng-template #other_content>
                <li class="mbsc-lv-gr-title mbsc-event-empty">
                  <div class="mbsc-empty">
                    <ion-icon item-left >
                      <img  src="./assets/img/if_calendar-alt.png" style=" width: 80px; ">
                    </ion-icon>
                    <h3>Aucun événement</h3>
                </div>
                </li>
              </ng-template>

            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="clear" style=" margin-bottom: 10px; "></div>
</ion-content>
